<dialog
    id="submissionDialog"
    class="max-w-[90%] lg:max-w-[50%] p-8 rounded-md fixed left-2/4 top-2/4 -translate-x-1/2 -translate-y-1/2 z-50"
>
    <button
        onclick="this.closest('dialog').close()"
        class="p-2 absolute right-2 top-2 text-gray-600 hover:text-gray-800"
        aria-label="Close dialog"
    >
        âœ•
    </button>
    <p
        id="dialogMessage"
        class="mt-2 px-4 text-lg text-balance wrap-anywhere"
    ></p>
</dialog>

<section
    class="bg-zinc-100 p-8 md:py-24 px-4 lg:px-24 flex flex-col lg:flex-row gap-16 lg:gap-8"
>
    <div class="md:basis-2/3 grow shrink-0">
        <h1
            class="text-5xl max-lg:text-3xl text-balance text-left text-blue-600"
        >
            Optimize &amp; Transform Images - Easily at Scale
        </h1>
        <p
            class="mt-8 text-slate-700 lg:text-slate-700/80 text-left text-balance text-lg lg:text-2xl"
        >
            Dynamically generate multiple variants of any image all in a single
            platform. Whether its for web or mobile, JPG or WEBP, round edges or
            grayscale from any source image we got you covered.
        </p>

        <ul class="mt-8 text-slate-700 text-left text-balance">
            <li class="list-none mb-2">
                &#127760; Transform with URL parameters
            </li>
            <li class="list-none mb-2">
                &#128640; Optimize for faster loading pages
            </li>
            <li class="list-none mb-2">
                &#128241; Resize images for any device
            </li>
            <li class="list-none mb-2">
                &#127912; Adjust brightness, contrast, and more
            </li>
            <li class="list-none mb-2">
                &#9889; Real-time transformations &amp; CDN-powered delivery
            </li>
        </ul>

        <form
            id="waitlistForm"
            class="mt-12 flex flex-col md:flex-row gap-4"
            method="post"
            action="https://waitlist.kritiimages.com/api/v1/waitlist"
        >
            <input
                type="email"
                id="email"
                name="email"
                placeholder="Enter your email"
                class="basis-1/2 px-4 py-2 rounded-md border border-zinc-300 focus:outline-none focus:border-blue-500"
                required=""
            />
            <button
                type="submit"
                class="px-4 py-2 rounded-md text-sm text-slate-50 hover:bg-blue-800 bg-blue-700 border border-blue-700 md:row-start-2"
            >
                Join the Waitlist
            </button>
        </form>
        <script>
            document
                .getElementById("waitlistForm")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const email = document.getElementById("email").value;
                    const dialog = document.getElementById("submissionDialog");
                    const dialogMessage =
                        document.getElementById("dialogMessage");

                    try {
                        const response = await fetch(this.action, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({ email: email }),
                        });

                        if (response.ok) {
                            dialogMessage.textContent =
                                "Thank you for joining our waitlist!";
                            dialog.showModal();
                            this.reset(); // Clear the form
                        } else {
                            dialogMessage.textContent =
                                "Could not submit. Please try again later.";
                            dialog.showModal();
                        }
                    } catch (error) {
                        dialogMessage.textContent =
                            "Could not submit. Please try again later.";
                        dialog.showModal();
                    }
                });
        </script>

        <p class="mt-6 text-slate-700 text-sm">
            Proudly <span class="italic">Open Source</span> with
            <a
                href="https://github.com/kritihq/kriti-images"
                target="_blank"
                class="text-blue-600 underline decoration-dotted hover:italic"
            >
                130+ stars on GitHub &#10024;
            </a>
        </p>
    </div>
    <div
        class="md:basis-1/3 md:grow-0 shrink-0 mx-auto max-w-[70vw] lg:max-w-full"
    >
        <style>
            #hero-animate img {
                transition: all 0.5s ease-in-out;
            }

            #hero-animate p::after {
                position: absolute;
                animation: cursor-blink 1s step-end infinite;
            }
            @keyframes cursor-blink {
                50% {
                    opacity: 0;
                }
            }
        </style>
        <div id="hero-animate" class="w-full max-auto">
            <img
                id="hero-image"
                class="w-[50%] lg:w-full h-full mx-auto"
                src="/assets/images/index/kritiimages_pexels-gabin-cobret-430175667-32948694.webp"
            />
            <p
                class="mt-4 min-h-1 font-mono text-xs md:text-base after:content-['_|'] after:absolute text-left md:text-center text-balance"
            ></p>
        </div>
        <script>
            function animateHero() {
                const heroImage = document.getElementById("hero-image");
                const textElement = document.querySelector("#hero-animate p");
                const baseText = "/tr:";
                const transforms = [
                    { style: {}, text: "height=400" },
                    {
                        style: { filter: "contrast(0.5)" },
                        text: ";contrast=50",
                    },
                    {
                        style: { borderRadius: "50%" },
                        text: ";radius=100%",
                    },
                ];
                let currentIndex = 0;

                async function typeText(newText, keepPrefix = "") {
                    if (keepPrefix) {
                        textElement.textContent = keepPrefix;
                    }
                    for (let char of newText) {
                        textElement.textContent += char;
                        await new Promise((resolve) => setTimeout(resolve, 50));
                    }
                }

                async function showNext() {
                    // Apply style to image
                    Object.assign(
                        heroImage.style,
                        transforms[currentIndex].style,
                    );

                    // Clear text when cycling back to first frame
                    if (currentIndex === 0) {
                        textElement.textContent = "";
                    }

                    // Type next text
                    const prefix =
                        currentIndex === 0 ? "" : textElement.textContent;
                    await typeText(
                        currentIndex === 0
                            ? baseText + transforms[currentIndex].text
                            : transforms[currentIndex].text,
                        prefix,
                    );

                    // Wait before next cycle
                    await new Promise((resolve) => setTimeout(resolve, 1000));

                    // Reset styles before next transition
                    if (currentIndex === transforms.length - 1) {
                        heroImage.style.filter = "";
                        heroImage.style.borderRadius = "";
                    }

                    // Update index
                    currentIndex = (currentIndex + 1) % transforms.length;
                }

                // Start animation cycle
                async function animate() {
                    while (true) {
                        await showNext();
                    }
                }

                animate();
            }

            document.addEventListener("DOMContentLoaded", animateHero);
        </script>
    </div>
</section>
<hr class="h-6 w-[200vw] relative -left-[50%] border-y border-zinc-400/40" />
<section class="bg-zinc-100 px-4 lg:px-12 pt-4 pb-24 text-start">
    <h2 class="text-3xl text-blue-600 mt-12">Optimise for any screen</h2>
    <p class="w-full lg:w-1/2 mt-6 mb-6 text-slate-700 text-balance">
        Transform your images for any device or screen size with our powerful
        resize and cropping options. From mobile thumbnails to desktop banners,
        deliver the perfect image size every time using simple URL parameters.
        Supports multiple fit modes like contain, cover, crop, and pad to ensure
        your images look great everywhere.
    </p>
    <img
        class="width-[60%] mx-auto border border-zinc-400 rounded-lg"
        src="/assets/images/index/kritiimages_responsive.png"
        alt="Same image on different screens"
    />
</section>
<hr class="h-6 w-[200vw] relative -left-[50%] border-y border-zinc-400/40" />
<section class="bg-zinc-100 px-4 lg:px-12 pt-4 pb-24 text-start">
    <h2 class="text-3xl text-blue-600 mt-12">
        Improve bounce rate, load pages faster
    </h2>
    <p class="w-1/2 max-lg:w-full mt-6 mb-6 text-slate-700 text-balance">
        Speed up your website with image optimization. Our service converts
        images to WebP format, adjusts quality settings, and delivers the
        smallest possible file size. Keep visitors engaged with fast-loading
        pages and reduce your bounce rate.
    </p>
    <img
        class="width-[60%] mx-auto border border-zinc-400 rounded-lg"
        src="/assets/images/index/kritiimages_formats.png"
        alt="Different image formats and reduced file size"
    />
</section>
<hr class="h-6 w-[200vw] relative -left-[50%] border-y border-zinc-400/40" />
<section class="bg-zinc-100 px-4 lg:px-12 pt-4 pb-24 text-start">
    <h2 class="text-3xl text-blue-600 mt-12">Easy to integrate</h2>
    <p class="w-1/2 max-lg:w-full mt-6 mb-6 text-slate-700 text-balance">
        Transform images on-the-fly using simple URL parameters - no complex
        APIs or SDKs required. Just add transformation commands to your image
        URLs and you're ready to go. Works seamlessly with any web framework,
        CDN, or development stack.
    </p>
    <img
        class="width-[60%] mx-auto border border-zinc-400 rounded-lg"
        src="/assets/images/index/kritiimages_url-integration.png"
        alt="Integrate by changing URLs"
    />
</section>
<hr class="h-6 w-[200vw] relative -left-[50%] border-y border-zinc-400/40" />
<section class="bg-zinc-100 px-4 lg:px-12 pt-4 pb-24 text-start">
    <h2 class="text-3xl text-blue-600 mt-12">Features</h2>

    <ol class="w-full lg:w-[90%] mx-auto mt-8">
        <li id="f_item_1" class="list-none min-h-12">
            <details
                class="group text-start w-full h-full lg:px-4 py-4 cursor-pointer border open:border-0 border-zinc-200 rounded-md"
                onclick="showoffFeature(0)"
                open=""
            >
                <summary
                    class="text-xl list-none before:content-['+'] group-open:before:content-['_-']"
                >
                    Resize, Crop &amp; Cut Corners
                </summary>
                <p class="mt-4 px-4 text-slate-500 text-sm text-pretty">
                    Change image dimensions and resize behaviour
                </p>
                <img
                    id="f_img_1"
                    class="rounded-md border border-zinc-400 lg:w-[60%] mx-auto mt-8"
                    src="/assets/images/index/kritiimages_resize-crop-and-corner.png"
                    alt="A cat cropped to profile picture dimensions"
                />
            </details>
        </li>
        <li id="f_item_2" class="list-none min-h-12 mt-4">
            <details
                class="group text-start w-full h-full lg:px-4 py-4 cursor-pointer border open:border-0 border-zinc-200 rounded-md"
                onclick="showoffFeature(1)"
            >
                <summary
                    class="text-xl list-none before:content-['+'] group-open:before:content-['_-']"
                >
                    Format &amp; Quality
                </summary>
                <p class="mt-4 px-4 text-slate-500 text-sm text-pretty">
                    Switch between different formats and adjust transformations
                    quality as you see fit
                </p>
                <img
                    id="f_img_2"
                    class="rounded-md border border-zinc-400 lg:w-[60%] mx-auto mt-8"
                    src="/assets/images/index/kritiimages_format-and-quality.png"
                    alt="Reduce file size from original image"
                />
            </details>
        </li>
        <li id="f_item_3" class="list-none min-h-12 mt-4">
            <details
                class="group text-start w-full h-full lg:px-4 py-4 cursor-pointer border open:border-0 border-zinc-200 rounded-md"
                onclick="showoffFeature(2)"
            >
                <summary
                    class="text-xl list-none before:content-['+'] group-open:before:content-['_-']"
                >
                    Rotate &amp; Flip
                </summary>
                <p class="mt-4 px-4 text-slate-500 text-sm text-pretty">
                    Just as the title says - nothing mysterious
                </p>
                <img
                    id="f_img_3"
                    class="rounded-md border border-zinc-400 lg:w-[60%] mx-auto mt-8"
                    src="/assets/images/index/kritiimages_rotate-and-flip.png"
                    alt="Rotate and flip a cat it will land on its legs"
                />
            </details>
        </li>
        <li id="f_item_4" class="list-none min-h-12 mt-4">
            <details
                class="group text-start w-full h-full lg:px-4 py-4 cursor-pointer border open:border-0 border-zinc-200 rounded-md"
                onclick="showoffFeature(3)"
            >
                <summary
                    class="text-xl list-none before:content-['+'] group-open:before:content-['_-']"
                >
                    Image Adjustments
                </summary>
                <p class="mt-4 px-4 text-slate-500 text-sm text-pretty">
                    Brightness, contrast, saturation, gamma we got those too
                </p>
                <img
                    id="f_img_4"
                    class="rounded-md border border-zinc-400 lg:w-[60%] mx-auto mt-8"
                    src="/assets/images/index/kritiimages_image-adjustments.png"
                    alt="Examples of brightness, contrast, sharpen and blur"
                />
            </details>
        </li>
    </ol>

    <script>
        const feats = [f_item_1, f_item_2, f_item_3, f_item_4];
        const featImgs = [f_img_1, f_img_2, f_img_3, f_img_4];
        function showoffFeature(id) {
            for (const f of feats) {
                f.querySelector("details")?.removeAttribute("open");
            }
        }
    </script>
    <h3 class="lg:w-[90%] mx-auto mt-12 mb-8 text-sm italic">
        And much more ...
    </h3>
    <ul
        id="features-list"
        class="mx-auto w-full lg:w-[90%] list-none! grid grid-cols-2 lg:grid-cols-4 auto-rows-fr text-sm md:text-base text-pretty"
    >
        <li class="px-2 md:px-4 py-4 border-zinc-400/40 border-r border-b">
            <h4>
                Corner Radius
                <span
                    class="inline-block w-fit md:ml-2 px-2 py-0.5 bg-blue-200/40 border border-blue-400 rounded-4xl text-xs"
                >
                    new
                </span>
            </h4>
            <p class="mt-2 text-sm text-slate-500 italic">
                Smooth corners or just circular profile pictures
            </p>
        </li>
        <li class="px-2 md:p-4 py-4 border-zinc-400/40 lg:border-r border-b">
            <h4 class="">Scale Down</h4>
            <p class="mt-2 text-sm text-slate-500 italic">
                Contain, Cover, Crop, Pad, Squeeze or Scaledown
            </p>
        </li>
        <li class="px-2 md:p-4 py-4 border-zinc-400/40 border-r border-b">
            <h4>Scale Up</h4>
            <p class="mt-2 text-sm text-slate-500 italic">
                Add background color to extra padding
            </p>
        </li>
        <li class="px-2 md:p-4 py-4 border-zinc-400/40 border-b">
            <h4>Image format</h4>
            <p class="mt-2 text-sm text-slate-500 italic">
                Interchange between JPEG, PNG or WebP
            </p>
        </li>
        <li
            class="px-2 md:p-4 py-4 border-zinc-400/40 border-b lg:border-b-0 border-r"
        >
            <h4>Blur</h4>
            <p class="mt-2 text-sm text-slate-500 italic">
                Hide sensitive data :shush:
            </p>
        </li>
        <li
            class="px-2 md:p-4 py-4 border-zinc-400/40 border-b lg:border-b-0 lg:border-r text-slate-500"
        >
            <h4>
                Templates & Presets
                <span
                    class="inline-block md:ml-2 px-2 py-0.5 bg-orange-200/40 border border-orange-400 rounded-4xl text-xs text-slate-900"
                >
                    planned
                </span>
            </h4>
            <p class="mt-2 text-sm italic">
                Auto generate images for different social media using presets
            </p>
        </li>
        <li class="px-2 md:p-4 py-4 border-r border-zinc-400/40 text-slate-500">
            <h4>
                Text Overlay
                <span
                    class="inline-block w-fit md:ml-2 px-2 py-0.5 bg-orange-200/40 border border-orange-400 rounded-4xl text-xs text-slate-900"
                >
                    planned
                </span>
            </h4>
            <p class="mt-2 text-sm italic">
                Add dynamic overlay text or static watermark
            </p>
        </li>
        <li class="px-2 md:p-4 py-4 border-0">
            <h4>
                <a
                    href="/docs/transformations"
                    class="text-blue-600 underline italic"
                >
                    View all &LongRightArrow;
                </a>
                <p class="mt-2 text-sm text-slate-500 italic">
                    See all the transformations and documentation
                </p>
            </h4>
        </li>
    </ul>
</section>
